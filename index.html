<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ant Classifier</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">
</head>
<body>
  <style>
  .login{
    float:left;
  }

  .box{
      margin-top: 5px;}

  .navbar{
      margin-bottom:0;
      border-radius:0;
    }

  .dropzone{

      margin-left: auto;
      margin-right: auto;
    }

  .submitButton {
      border-radius:10px;
      display:block;
      width: 100px;
      text-align: center;
      color:black;
      float: left;
      
      }
  .cancelButton {

      border-radius:10px;
      display:block;
      width: 100px;
      text-align: center;
      color:black;
      float: left;
      margin-left: 5px;
      }
  .returnButton {
      border-radius:10px;
      display:block;
      width: 100px;
      text-align: center;
      color:black;
      float: left;
      
      }
  .submitLoginButton {
      border-radius:5px;
      width: 170px;
      height:28px;
      margin-left: 72px;
      text-align: center;
      color:black;
      margin-bottom: 5px; 
      margin-top: 15px;
    
    }
  .regButton {
      border-radius:5px;
      margin-left: 72px;
      width: 170px;
      text-align: center;
      color:black;
      margin-top: 8px;
      height:28px;

    }
  .regCancelButton {
      border-radius:5px;
      margin-left: 10px;
      width: 120px;
      text-align: center;
      color:black;
      margin-top: 8px;
      height:28px;

    }
  .regSubmitButton {
      border-radius:5px;
      margin-left: 30px;
      width: 120px;
      text-align: center;
      color:black;
      margin-top: 8px;
      height:28px;

    }
  .resTable{

      margin-left: auto;
      margin-right: auto;
    }
  .dzone{
      padding-top: 120px;
      
   }

  </style>

  <nav class="navbar navbar-inverse right">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Ant Classifier</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">

              <li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Contact Us <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a class="headerLinks">Marek Borowiec - Site Sponsor</a>
                <a class="listLinks" href="mailto:petiolus@gmail.com" target="_top">email: petiolus@gmail.com </a>  </li>
                <li role="separator" class="divider"></li>
                <li><a class="headerLinks">Gabriele Valentini - Site Sponsor </a>
                <a class="listLinks" href="mailto:gvalent3@asu.edu" target="_top">email: gvalent3@asu.edu </a></li>
              </ul>
            </li>
            <!--<li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li> -->
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Links <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="http://antweb.org" target="_blank">AntWeb</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="https://bugguide.net/node/view/15740" target="_blank">BugGuide</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="https://en.wikipedia.org/wiki/Ant" target="_blank">Wikipedia</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="https://sols.asu.edu/" target="_blank">ASU School of Life Sciences</a></li>
              </ul>
            </li>
            <li><a href="#">About Site</a></li>
            <li id="home"><a href="#"><span class="glyphicon glyphicon-home"></span> Home</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

  <div class="jTron">
    <div class=" jumbotron " id="jumbotron-display">
      <div class="container text-center">
        <h1>Welcome to Ant Classifier</h1>
        <p>Using Artificial Intelligence to identify and classify your images.</p>
        <a href="/about.html" class="btn btn-default" id="learnBtn">Learn More</a>
      </div>
    </div>
  </div>

  <div class="jTron" id="regJTron">
      <div class="jumbotron" >
        <div class="container text-center">
          <h1>Registration</h1>
          <p> Registering grants you access to the image classification system.
          </p>
        </div>
      </div>
    </div>


                <!--  LOG IN -->
<div id="login">
  <br>
  <br>
  <div class="container">
  <form>
    <div id="userName" class="container ">
      User Name <input type="text" id="Username"/>
    </div>
    <br>
    <div id="password" class="container">
      Password    <input style="margin-left: 7px;" type="text" id="Password"/><br>
      <a href="#" class="btn btn-default submitLoginButton" id="sBtn" >Submit</a><br>
      <a href="#" class="btn btn-default regButton" id="regBtn">Register</a>
   </div>
  </form> 
  </div>
</div>
        <!-- REGISTRATION -->
<div class="container" id="registration">
    <form method="post" name="userInfo" onsubmit="return ValidateEmail()">
      <div id="credentials" class="col-md-12">
        First Name:<br><input type="text" id="firstName" required/><br>
        Last Name:<br><input type="text" id="lastName" required/><br>
        Email:<br><input type="text" id="email"  required/><br>
        User Name:<br><input type="text" id="registerUN" required/><br>
        Password:<br><input id="regPassword" type="password" required/>
        <input type="checkbox" name="option" value='1' onchange="changeType()" /> View password<br>
        Confirm Password:<br><input  type="password" id="confPassword" oninput="check()" required/>
        <input type="checkbox" name="option2" value='1' onchange="changeType2()" /> View password

       
       <a href="#" class="btn btn-default regSubmitButton" id="registrationBtn" >Submit</a>
       <a href="#" class="btn btn-default regCancelButton" id="regCancelBtn" >Cancel</a>
        <!--<button id="registrationBtn" class="btn btn-default regButton "   >Submit</button>-->
      </div>
    </form>
  </div>

  <div class="container box dzone" id="dropz">
    <p id="steps" style="color:green">Step 1: Upload your image.</p>
    <form action="/user_img" ondrop="drop(event)" onclick="drop(event)" 
      class="dropzone" method="post"
      id="mydz" style="border-style: dashed;"></form>
    </div>
 
      
<div class="container box" id="resBox">
   <button type="submit" class=" btn btn-default submitButton" id="get-results" >Submit</button>
   <br>
</div>

<p class = "container box" id="resultText">Results:</p>
<div id="results-table"></div></div></div>

  <div class="container box" >
      <button type="submit" class=" btn btn-default returnButton" id="return" >Return</button>
      </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>
    
    <script>
    var count=0;
    function check(){
          if (document.getElementById('confPassword').value != document.getElementById('regPassword').value) {
                document.getElementById('confPassword').setCustomValidity('Password Must be Matching.');} 
          else {
                // input is valid -- reset the error message
                document.getElementById('confPassword').setCustomValidity('');
              }
          }
        
    function ValidateEmail(){
          if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(document.getElementById('email').value)){
            return (true)
            }
            alert("You have entered an invalid email address!")
            return (false)
            }
        
    function changeType(){
          document.getElementById('regPassword').type=(document.userInfo.option.value=(document.userInfo.option.value==1)?'-1':'1')=='-1'?'text':'password';
          }
          
          function changeType2()
          {
            document.getElementById('confPassword').type=(document.userInfo.option2.value=(document.userInfo.option2.value==1)?'-1':'1')=='-1'?'text':'password';
          }

    function drop(event) {
          event.preventDefault();
          //document.getElementById("mydz").style.width = "500px";
          }    
    

    Dropzone.options.mydz = {
      dictDefaultMessage: "Click or drag image into box",
      addRemoveLinks: true,
      uploadMultiple: false,
      maxFiles:1,
      acceptedFiles: "image/png,image/gif,image/jpg,image/jpeg,image/tif,image/tiff,image/bmp,image/raw,image/wmf, image/webp, image/img, image/pct, image/tga, image/jpe, image/ani, image/heif, image/heic",

      init: function() {
        this.on("maxfilesexceeded", function(file){
        count++;
        document.getElementById("steps").innerHTML = "<span style='color:red'>ONLY ONE FILE ALLOWED, PLEASE REMOVE LAST FILE.</span>";
        $("#get-results").hide();
      });
          
      }
    };

    $(document).ready(function(){
      Dropzone.autoDiscover = false;
      var dropzone = new Dropzone (".dropzone", {
      });

    dropzone.on("removedfile", function(file){
      count--;
      if (count==0){
        document.getElementById("steps").innerHTML = "Step 1: Upload your image.";
        $("#get-results").hide();
        $(".dz-message").show();
        }
        else if (count==1){
          document.getElementById("steps").innerHTML = "Step 2: Click Submit to send image to classifier.";
          $("#get-results").show();
        }
      else{        
        $("#get-results").hide();
        }
      });
    
    dropzone.on("success", function(file){
        count++; 
        document.getElementById("steps").innerHTML = "Step 2: Click Submit to send image to classifier.";
        $("#get-results").show();
      });

    dropzone.on("processing", function(file){
        $(".dz-message").hide();
      });

    $('#get-results').click(function () {
      var displayResources = $('#results-table');
      var k=1;
      $.ajax({
      type: "GET",
      url: "example.json",
      success: function(result){
        console.log(result);
        var output="<div  id='tab' ><div class='container'><div class='table-responsive' id='results-table' style='overflow-x:auto;'><table class='table table-bordered table-hover'><tr><th class='col-md-1'>Result Ranking</th><th class='col-md-1'>Percent Confidence</th><th>Ant Species</th><th>Common Name</th><th  data-field='action' data-formatter='ActionFormatter'>Link</th></tr><tbody>";
        for (var i in result){
          if(i==0){
            output+="<tr class='success'><td>" + k + "</td><td>" + result[i].confidence + "</td><td>" + result[i].species + "</td><td>"+result[i].name+"</td><td><a href='"+result[i].url+"' class='btn btn-default' target='_blank'>More Info</a></td></tr>";}
          else{
            output+="<tr><td>" + k + "</td><td>" + result[i].confidence + "</td><td>" + result[i].species + "</td><td>"+result[i].name+"</td><td><a target='_blank' href='"+result[i].url+"' class='btn btn-default' >More Info</a></td></tr>";}
            k++;
          }
        output+="</tbody></table>";
        displayResources.html(output);
        $("table").addClass("table");
        }
      });
    });

    $("#registration").hide();
    $("#login").show();
    $("#get-results").hide();
    $("#cancelButton").show();
    $("#tab").hide();
    $(".jTron").show();
    $("#return").hide();
    $("#resultText").hide();
    $("#return").hide();
    $("#dropz").hide();
    $("#regJTron").hide();


    $("#get-results").click(function(){
        $(".jTron").slideUp("slow");
        $("#tab").show();
        $(".dropzone").hide();
        document.getElementById("steps").innerHTML = "";
        $("#get-results").hide();
        //$("#resultText").css("padding-top", "20px");
        $("#return").show();
        $("#resultText").show();
        //$("#resBox").hide();
        $("#dropz").css("display", "none");
        $('.dz-preview').remove();
        
    });

    $("#return").click(function(){
        $(".jTron").hide();
        $("#tab").show();
        $("#dropz").css("display", "block");
        $("#dropz").css("padding-top", "10px");
        $(".dropzone").show();
        document.getElementById("steps").innerHTML = "Submit another image for classifying.";
        //$("#get-results").show();
        document.getElementById("resultText").innerHTML = "Previous Results:";
        $("#return").hide();
        // dropzone.options.maxFiles=dropzone.options.maxFiles+1;
        dropzone.removeAllFiles(true); 
      
    



        //$('div.dz-success').remove();
        //$(".dz-message").show();
        //$("#get-results").hide();
        
        // $("#returnButton").hide();
    });

    $("#cancelButton").click(function(){
        $("#tab").show();
        //  document.getElementById("steps").innerHTML = "Step 1: Upload your image.";
    });
    
    $("#learnBtn").click(function(){
        
    });
    
    $("#sBtn").click(function(){
        $(".jTron").hide();
        $("#regJTron").hide();
        $("#login").hide();
        $("#registration").hide();
        $("#dropz").show();
        $(".dropzone").show();
        $("#steps").show();
        document.getElementById("steps").innerHTML = "Step 1: Upload your image.";
    });

    $("#regBtn").click(function(){
        $(".jTron").hide();
        $("#regJTron").slideDown("slow");
        $("#login").hide();
        $("#registration").show();
    });

    $("#regCancelBtn").click(function(){
        $(".jTron").show();
        $("#regJTron").hide();
        $("#login").show();
        $("#registration").hide();
    });

    $(".navbar-brand").click(function(){
        //SHOW ONLY IF NOT ALREADY LOGGED IN
        $("#login").show();
        $(".jTron").slideDown("slow");
        $("#regJTron").hide();
        $("#registration").hide();
        $("#dropz").show();
        $("#tab").hide();
        $("#resultText").hide();
        $("#dropz").css("display", "block");
        $("#return").hide();
        //$('div.dz-success').remove();
        //$(".dz-message").show();
        $("#steps").hide();
        //document.getElementById("steps").innerHTML = "";
        dropzone.removeAllFiles(true); 
        $(".dropzone").hide();
        $("#dropz").css("display", "block");
        $("#dropz").css("padding-top", "120px");

    });
  
    $("#home").click(function(){
        //SHOW ONLY IF NOT ALREADY LOGGED IN
       //SHOW ONLY IF NOT ALREADY LOGGED IN
        $("#login").show();
        $(".jTron").slideDown("slow");
        $("#regJTron").hide();
        $("#registration").hide();
        $("#dropz").show();
        $("#tab").hide();
        $("#resultText").hide();
        $("#dropz").css("display", "block");
        $("#return").hide();
        //$('div.dz-success').remove();
        //$(".dz-message").show();
        $("#steps").hide();
        //document.getElementById("steps").innerHTML = "";
        dropzone.removeAllFiles(true); 
        $(".dropzone").hide();
        $("#dropz").css("display", "block");
        $("#dropz").css("padding-top", "120px");
    });
});
(jQuery);
</script>
</body>
</html>